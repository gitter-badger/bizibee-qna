<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html lang="#{localeBean.locale}"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:composite="http://xmlns.jcp.org/jsf/composite/composite"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <f:view contentType="text/html" encoding="UTF-8" locale="#{localeBean.locale}">

        <h:head>
            <f:facet name="first">
                <meta charset="utf-8"/>
                <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
                <title><ui:insert name="title"></ui:insert></title>
            </f:facet>
            <f:facet name="middle">
            </f:facet>
            <f:facet name="last">
            </f:facet>

            <h:outputStylesheet name="css/master.css"/>
            <h:outputScript name="js/master.js"/>

            <ui:insert name="head"></ui:insert>
        </h:head>

        <h:body>

            <p:layout fullPage="true">

                <p:layoutUnit position="north">
                    <div class="ui-g">
                        <div class="ui-g-4" style="text-align: left;">
                            <h:link outcome="/index" style="text-decoration: none;">
                                <composite:logo text="BiZiBee®" width="78" height="30" fill="#000000" stroke="#000000"/>
                            </h:link>
                        </div>
                        <div class="ui-g-4" style="text-align: center;">
                        </div>
                        <div class="ui-g-4" style="text-align: right;">
                            <h:form>
                                <p:link value="#{i18n['Profile']}" outcome="/member/profile" style="margin-left: 10px;"/>
                                <p:commandLink value="#{i18n['Logout']}" action="#{loginBean.doLogout}" style="margin-left: 10px;"/>
                                <p:selectOneMenu value="#{localeBean.locale}" converter="#{localeConverter}" style="margin-left: 10px;">
                                    <p:ajax listener="#{localeBean.onChange}" oncomplete="location.reload()"/>
                                    <f:selectItems value="#{localeBean.locales}" var="locale" itemLabel="#{locale.getDisplayName(localeBean.locale)}"/>
                                </p:selectOneMenu>
                            </h:form>
                        </div>
                    </div>
                </p:layoutUnit>
                <p:layoutUnit position="south">
                    <div class="ui-g">
                        <div class="ui-g-12">
                            © 
                            <h:outputText value="#{session.lastAccessedTime}">
                                <f:convertDateTime pattern="yyyy" type="date"/>
                            </h:outputText>
                            ARI Business Management Systems
                        </div>
                    </div>
                </p:layoutUnit>
                <p:layoutUnit position="west" collapsible="true" header="#{request.userPrincipal}">
                    <ui:include src="menu.xhtml"/>
                </p:layoutUnit>

                <p:layoutUnit position="center">
                    <ui:insert name="breadCrumb"></ui:insert>
                    <br/>
                    <ui:insert name="content"></ui:insert>
                </p:layoutUnit>

            </p:layout>

            <ui:insert name="dialog"></ui:insert>

            <p:growl id="growl" showSummary="false" showDetail="true" life="5000" redisplay="false" autoUpdate="true"/>

            <h:form>
                <p:confirmDialog global="true" closeOnEscape="true">
                    <p:commandButton value="#{i18n['Yes']}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                    <p:commandButton value="#{i18n['No']}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
                </p:confirmDialog>
            </h:form>

        </h:body>

    </f:view>

</html>