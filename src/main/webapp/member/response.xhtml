<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template.xhtml">
    <ui:define name="breadCrumb">
        <h:form>
            <p:breadCrumb>
                <p:menuitem value="#{i18n['Home']}" outcome="/index" />
                <p:menuitem value="#{i18n['Dashboard']}" outcome="/member/index" />
            </p:breadCrumb>
        </h:form>
    </ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="id" value="#{responseView.id}"/>
            <f:event type="preRenderView" listener="#{responseView.onLoad}"/>
        </f:metadata>

        <!--TODO burayı başka nasıl yaparız-->
        <p:steps activeIndex="#{responseView.selectedRecord.id-1}" readonly="false" model="#{responseView.menuModel}"/>

        <h3><h:outputText value="#{responseView.selectedRecord.description}"/></h3>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'SINGLE_CHOICE'}">
            <p:selectOneRadio value="#{responseView.model1.decisionchoice}" 
                              label="#{responseView.selectedRecord.name}" 
                              required="#{responseView.selectedRecord.required}" 
                              layout="pageDirection" columns="1"
                              converter="#{decisionchoiceConverter}">
                <f:selectItems value="#{responseView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
            </p:selectOneRadio>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'MULTIPLE_CHOICE'}">
            <p:selectManyCheckbox value="#{responseView.model2.decisionchoices}" 
                                  label="#{responseView.selectedRecord.name}" 
                                  required="#{responseView.selectedRecord.required}" 
                                  layout="pageDirection" columns="1"
                                  converter="#{decisionchoiceConverter}">
                <f:selectItems value="#{responseView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
            </p:selectManyCheckbox>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'SINGLE_SKU_LISTING'}">
            <p:selectOneRadio value="#{responseView.model3.sku}" 
                              label="#{responseView.selectedRecord.name}" 
                              required="#{responseView.selectedRecord.required}" 
                              layout="pageDirection" columns="1"
                              converter="#{skuConverter}">
                <f:selectItems value="#{responseView.selectedRecord.skus}" var="sku" itemValue="#{sku}" itemLabel="#{sku.brand.name} #{sku.name}"/>
            </p:selectOneRadio>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'MULTIPLE_SKU_LISTING'}">
            <p:selectManyCheckbox value="#{responseView.model4.skus}" 
                                  label="#{responseView.selectedRecord.name}" 
                                  required="#{responseView.selectedRecord.required}" 
                                  layout="pageDirection" columns="1"
                                  converter="#{skuConverter}">
                <f:selectItems value="#{responseView.selectedRecord.skus}" var="sku" itemValue="#{sku}" itemLabel="#{sku.brand.name} #{sku.name}"/>
            </p:selectManyCheckbox>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'RANGE_SKU_LISTING'}">
            <p:repeat var="model" value="#{responseView.model5}">
                <h:outputText value="#{model.sku.brand.name} #{model.sku.name}"/>
                <h:panelGrid columns="2">
                    <p:spinner value="#{model.value}" 
                               label="#{responseView.selectedRecord.name}" 
                               required="#{responseView.selectedRecord.required}" 
                               min="#{model.sku.indexMin}" 
                               max="#{model.sku.indexMax}" 
                               stepFactor="#{model.sku.indexStep}"/>
                    <h:outputFormat value="{0} ürünü için {1} index ile {2} index arasinda bir fiyat belirleyin">
                        <f:param value="#{model.sku.name}"/>
                        <f:param value="#{model.sku.indexMin}"/>
                        <f:param value="#{model.sku.indexMax}"/>
                    </h:outputFormat>
                </h:panelGrid>
            </p:repeat>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'SINGLE_CHOICE_SKU_LISTING'}">
            <p:repeat var="model" value="#{responseView.model6}">
                <h:outputText value="#{model.sku.brand.name} #{model.sku.name}"/>
                <p:selectOneRadio value="#{model.decisionchoice}" 
                                  label="#{responseView.selectedRecord.name}" 
                                  required="#{responseView.selectedRecord.required}" 
                                  converter="#{decisionchoiceConverter}">
                    <f:selectItems value="#{responseView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                </p:selectOneRadio>
            </p:repeat>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'MULTIPLE_CHOICE_SKU_LISTING'}">
            <p:repeat var="model" value="#{responseView.model7}">
                <h:outputText value="#{model.sku.brand.name} #{model.sku.name}"/>
                <p:selectManyCheckbox value="#{model.decisionchoices}" 
                                      label="#{responseView.selectedRecord.name}" 
                                      required="#{responseView.selectedRecord.required}" 
                                      converter="#{decisionchoiceConverter}">
                    <f:selectItems value="#{responseView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                </p:selectManyCheckbox>
            </p:repeat>
            <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

    </ui:define>
</ui:composition>