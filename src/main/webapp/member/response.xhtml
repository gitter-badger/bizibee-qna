<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template.xhtml">
    <ui:define name="breadCrumb">
        <h:form>
            <p:breadCrumb>
                <p:menuitem value="#{i18n['Home']}" outcome="/index" />
                <p:menuitem value="#{i18n['Dashboard']}" outcome="/member/index" />
            </p:breadCrumb>
        </h:form>
    </ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="id" value="#{responseView.id}"/>
            <f:event type="preRenderView" listener="#{responseView.onLoad}"/>
        </f:metadata>

        <p:steps activeIndex="#{responseView.selectedRecord.id-1}" readonly="false" model="#{responseView.menuModel}"/>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'SINGLE_CHOICE'}">
            <p:selectOneRadio value="#{responseView.model1}" 
                              layout="pageDirection" columns="1"
                              converter="#{decisionchoiceConverter}">
                <f:selectItems value="#{responseView.fetchDecisionchoices(responseView.selectedRecord)}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
            </p:selectOneRadio>
            <p:commandButton value="#{i18n['Submit']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'MULTIPLE_CHOICE'}">
            <p:selectManyCheckbox value="#{responseView.model2}" 
                                  layout="pageDirection" columns="1"
                                  converter="#{decisionchoiceConverter}">
                <f:selectItems value="#{responseView.fetchDecisionchoices(responseView.selectedRecord)}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
            </p:selectManyCheckbox>
            <p:commandButton value="#{i18n['Submit']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'RANGE_PRODUCT_LISTING'}">
            <p:repeat var="product" value="#{productView.fetchAllRecords()}">
                <h:outputText value="#{product.name}"/>
                <h:panelGrid columns="2">
                    <p:spinner value="#{responseView.model3[product]}" min="#{product.indexMin}" max="#{product.indexMax}" stepFactor="#{product.indexStep}" />
                    <h:outputFormat value="{0} ürünü için {1} index ile {2} index arasinda bir fiyat belirleyin">
                        <f:param value="#{product.name}"/>
                        <f:param value="#{product.indexMin}"/>
                        <f:param value="#{product.indexMax}"/>
                    </h:outputFormat>
                </h:panelGrid>
            </p:repeat>
            <p:commandButton value="#{i18n['Submit']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'SINGLE_CHOICE_PRODUCT_LISTING'}">
            <p:repeat var="product" value="#{productView.fetchAllRecords()}">
                <h:outputText value="#{product.name}"/>
                <p:selectOneRadio value="#{responseView.model4[product]}" converter="#{decisionchoiceConverter}">
                    <f:selectItems value="#{responseView.fetchDecisionchoices(responseView.selectedRecord)}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                </p:selectOneRadio>
            </p:repeat>
            <p:commandButton value="#{i18n['Submit']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

        <h:form rendered="#{responseView.selectedRecord.decisionType eq 'MULTIPLE_CHOICE_PRODUCT_LISTING'}">
            <p:repeat var="product" value="#{productView.fetchAllRecords()}">
                <h:outputText value="#{product.name}"/>
                <p:selectManyCheckbox value="#{responseView.model5[product]}" converter="#{decisionchoiceConverter}">
                    <f:selectItems value="#{responseView.fetchDecisionchoices(responseView.selectedRecord)}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                </p:selectManyCheckbox>
            </p:repeat>
            <p:commandButton value="#{i18n['Submit']}" update=":growl" actionListener="#{responseView.doUpdate}"/>
        </h:form>

    </ui:define>
</ui:composition>