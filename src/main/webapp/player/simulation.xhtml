<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                template="/template_landing.xhtml">
    <ui:define name="head">
        <style type="text/css">
            .ui-steps .ui-steps-item {
                width: calc(100% / #{simulationView.menuModel.elements.size()});
                height: 100px;
            }
            .ui-steps .ui-steps-item .ui-menuitem-link .ui-steps-title {
                white-space: initial;
            }
        </style>
    </ui:define>
    <ui:define name="content">
        <f:metadata>
            <f:viewParam name="sequence" value="#{simulationView.sequence}"/>
            <f:event type="preRenderView" listener="#{simulationView.onLoad}"/>
        </f:metadata>

        <div id="simulation">
            <div class="simulation-content">
                <h1 class="simulation-title">#{i18n['Simulation']}</h1>
                <p><h:outputText value="#{dashboardView.selectedUser.simulation.name}" /></p>

                <p:steps activeIndex="#{simulationView.sequence}" readonly="true" model="#{simulationView.menuModel}"/>

                <h3><h:outputText value="#{simulationView.selectedRecord.description}"/></h3>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'SINGLE_CHOICE'}">
                    <p:selectOneRadio value="#{simulationView.model1.decisionchoice}" 
                                      label="#{simulationView.selectedRecord.name}" 
                                      required="#{simulationView.selectedRecord.required}" 
                                      layout="pageDirection" columns="1"
                                      converter="#{decisionchoiceConverter}">
                        <f:selectItems value="#{simulationView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                    </p:selectOneRadio>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'MULTIPLE_CHOICE'}">
                    <p:selectManyCheckbox value="#{simulationView.model2.decisionchoices}" 
                                          label="#{simulationView.selectedRecord.name}" 
                                          required="#{simulationView.selectedRecord.required}" 
                                          layout="pageDirection" columns="1"
                                          converter="#{decisionchoiceConverter}">
                        <f:selectItems value="#{simulationView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                    </p:selectManyCheckbox>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'SINGLE_SKU_LISTING'}">
                    <p:selectOneRadio value="#{simulationView.model3.sku}" 
                                      label="#{simulationView.selectedRecord.name}" 
                                      required="#{simulationView.selectedRecord.required}" 
                                      layout="pageDirection" columns="1"
                                      converter="#{skuConverter}">
                        <f:selectItems value="#{simulationView.selectedRecord.skus}" var="sku" itemValue="#{sku}" itemLabel="#{sku.brand.name} #{sku.name}"/>
                    </p:selectOneRadio>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'MULTIPLE_SKU_LISTING'}">
                    <p:selectManyCheckbox value="#{simulationView.model4.skus}" 
                                          label="#{simulationView.selectedRecord.name}" 
                                          required="#{simulationView.selectedRecord.required}" 
                                          layout="pageDirection" columns="1"
                                          converter="#{skuConverter}">
                        <f:selectItems value="#{simulationView.selectedRecord.skus}" var="sku" itemValue="#{sku}" itemLabel="#{sku.brand.name} #{sku.name}"/>
                    </p:selectManyCheckbox>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'RANGE_SKU_LISTING'}">
                    <p:repeat var="model" value="#{simulationView.model5}">
                        <h:outputText value="#{model.sku.brand.name} #{model.sku.name}"/>
                        <h:panelGrid columns="2">
                            <p:spinner value="#{model.value}" 
                                       label="#{simulationView.selectedRecord.name}" 
                                       required="#{simulationView.selectedRecord.required}" 
                                       min="#{model.sku.indexMin}" 
                                       max="#{model.sku.indexMax}" 
                                       stepFactor="#{model.sku.indexStep}"/>
                            <h:outputFormat value="{0} ürünü için {1} index ile {2} index arasinda bir fiyat belirleyin">
                                <f:param value="#{model.sku.name}"/>
                                <f:param value="#{model.sku.indexMin}"/>
                                <f:param value="#{model.sku.indexMax}"/>
                            </h:outputFormat>
                        </h:panelGrid>
                    </p:repeat>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'SINGLE_CHOICE_SKU_LISTING'}">
                    <p:repeat var="model" value="#{simulationView.model6}">
                        <h:outputText value="#{model.sku.brand.name} #{model.sku.name}"/>
                        <p:selectOneRadio value="#{model.decisionchoice}" 
                                          label="#{simulationView.selectedRecord.name}" 
                                          required="#{simulationView.selectedRecord.required}" 
                                          converter="#{decisionchoiceConverter}">
                            <f:selectItems value="#{simulationView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                        </p:selectOneRadio>
                    </p:repeat>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

                <h:form rendered="#{simulationView.selectedRecord.decisionType eq 'MULTIPLE_CHOICE_SKU_LISTING'}">
                    <p:repeat var="model" value="#{simulationView.model7}">
                        <h:outputText value="#{model.sku.brand.name} #{model.sku.name}"/>
                        <p:selectManyCheckbox value="#{model.decisionchoices}" 
                                              label="#{simulationView.selectedRecord.name}" 
                                              required="#{simulationView.selectedRecord.required}" 
                                              converter="#{decisionchoiceConverter}">
                            <f:selectItems value="#{simulationView.selectedRecord.decisionchoices}" var="decisionchoice" itemValue="#{decisionchoice}" itemLabel="#{decisionchoice.name}"/>
                        </p:selectManyCheckbox>
                    </p:repeat>
                    <p:commandButton value="#{i18n['Next']}" update=":growl" actionListener="#{simulationView.doUpdate}"/>
                </h:form>

            </div>
        </div>
    </ui:define>
</ui:composition>